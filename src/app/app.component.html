<nav class="navbar navbar-default">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="#">Firebase Example</a>
    </div>
  </div>
</nav>

<div *ngIf="appState=='extend'">
  <div class="row">
    <div class="col-md-12">
      <button class="btn btn-success" (click)="changeState('default')">Back</button>
    </div>
  </div>


<div *ngFor="let business of businesses">
  <div *ngIf="business.$key==activeKey">
    <div class="row">
      <div class="container">
      <div class="col-md-5">
        <h3>{{business.company}}</h3>
        <p>Category {{business.category}}</p>
        <p>Description {{business.desc}}</p>
      </div>
      <div class="col-md-5">
        <h3>Contact İnfo</h3>
        <p>City {{business.city}}</p>
        <p>Phone {{business.phone}}</p>
        <p>Email {{business.email}}</p>
      </div>
      </div>
    </div>
  </div>
</div>
</div>

<div *ngIf="appState=='add'">
  <div class="row">
    <div class="container">
      <form class="form-horizontal" (ngSubmit)="onSubmit(f)" #f="ngForm">
        <fieldset>

          <div class="col-md-6">
            <legend>Kişisel Bilgiler</legend>
            <div class="form-group">
              <label for="email" class="col-lg-2 control-label">Email</label>
              <div class="col-lg-10">
                <input type="email" name="email" class="form-control" id="email" ngModel placeholder="Email" required>
              </div>
            </div>
            <div class="form-group">
              <label for="phone" class="col-lg-2 control-label">Phone</label>
              <div class="col-lg-10">
                <input ngModel type="text" name="phone" class="form-control" id="phone" placeholder="Phone" required>
              </div>
            </div>
            <div class="form-group">
              <label for="city" class="col-lg-2 control-label">City</label>
              <div class="col-lg-10">
                <input ngModel type="text" name="city" class="form-control" id="city" placeholder="City" required>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <legend>Genel Bilgiler</legend>
            <div class="form-group">
              <label for="category" class="col-lg-2 control-label">Category</label>
              <div class="col-lg-10">
                <select ngModel class="form-control" id="category" name="category" required>
                  <option value="0">Select</option>
                  <option *ngFor="let category of categories" value="{{category.name}}">{{category.name}}</option>
                </select>
              </div>
            </div>
            <div class="form-group">
              <label for="company" class="col-lg-2 control-label">Company</label>
              <div class="col-lg-10">
                <input ngModel type="text" name="company" class="form-control" id="company" placeholder="Company" required>
              </div>
            </div>
            <div class="form-group">
              <label for="desc" class="col-lg-2 control-label">Description</label>
              <div class="col-lg-10">
                <input ngModel type="text" name="desc" class="form-control" id="desc" placeholder="Description" required>
              </div>
            </div>
          </div>



          <div class="form-group">
            <div class="col-lg-10 col-lg-offset-2">
              <button type="reset" [disabled]="!f.valid" class="btn btn-default">Cancel</button>
              <button type="submit" [disabled]="!f.valid" class="btn btn-primary">Submit</button>
            </div>
          </div>
        </fieldset>
      </form>
    </div>
  </div>
</div>

<div *ngIf="appState=='edit'">
  <div class="row">
    <div class="container">
      <form class="form-horizontal" (ngSubmit)="onUpdate(f)" #f="ngForm">
        <fieldset>

          <div class="col-md-6">
            <legend>Kişisel Bilgiler</legend>
            <div class="form-group">
              <label for="email" class="col-lg-2 control-label">Email</label>
              <div class="col-lg-10">
                <input type="email" name="email" class="form-control" id="email" [(ngModel)]="business.email" placeholder="Email" required>
              </div>
            </div>
            <div class="form-group">
              <label for="phone" class="col-lg-2 control-label">Phone</label>
              <div class="col-lg-10">
                <input [(ngModel)]="business.phone" type="text" name="phone" class="form-control" id="phone" placeholder="Phone" required>
              </div>
            </div>
            <div class="form-group">
              <label for="city" class="col-lg-2 control-label">City</label>
              <div class="col-lg-10">
                <input [(ngModel)]="business.city" type="text" name="city" class="form-control" id="city" placeholder="City" required>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <legend>Genel Bilgiler</legend>
            <div class="form-group">
              <label for="category" class="col-lg-2 control-label">Category</label>
              <div class="col-lg-10">
                <select [(ngModel)]="business.category" class="form-control" id="category" name="category" required>
                  <option value="0">Select</option>
                  <option *ngFor="let category of categories" value="{{category.name}}">{{category.name}}</option>
                </select>
              </div>
            </div>
            <div class="form-group">
              <label for="company" class="col-lg-2 control-label">Company</label>
              <div class="col-lg-10">
                <input [(ngModel)]="business.company" type="text" name="company" class="form-control" id="company" placeholder="Company" required>
              </div>
            </div>
            <div class="form-group">
              <label for="desc" class="col-lg-2 control-label">Description</label>
              <div class="col-lg-10">
                <input [(ngModel)]="business.desc" type="text" name="desc" class="form-control" id="desc" placeholder="Description" required>
              </div>
            </div>
          </div>



          <div class="form-group">
            <div class="col-lg-10 col-lg-offset-2">
              <button type="reset" [disabled]="!f.valid" class="btn btn-default">Cancel</button>
              <button type="submit" [disabled]="!f.valid" class="btn btn-primary">Submit</button>
            </div>
          </div>
        </fieldset>
      </form>
    </div>
  </div>
</div>

<div class="row">
  <div class="container">
    <div class="col-md-6">
     <button (click)="changeState('add')" class="btn btn-success">Add Business</button>
    </div>
    <div class="col-md-6">
      <label>Filter Category
      <select class="form-control" (change)="onChange(s.value)" #s>
        <option value="0">Select</option>
        <option *ngFor="let category of categories" value="{{category.name}}">{{category.name}}</option>
      </select>
      </label>
    </div>
  </div>
</div>

<div class="row">
  <div class="container">
    <table class="table table-striped table-hover ">
      <thead>
      <tr>
        <th>Company</th>
        <th>Category</th>
        <th>Phone</th>
        <th>Action</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let business of businesses">
        <td>{{business.company}}</td>
        <td>{{business.category}}</td>
        <td>{{business.phone}}</td>
        <td>
          <a (click)="changeState('extend',business.$key)" class="btn btn-info">More</a>
          <a (click)="onEdit(business)" class="btn btn-warning">Edit</a>
          <a (click)="onDelete(business.$key)" class="btn btn-danger">Delete</a>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
</div>

